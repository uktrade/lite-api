version: 2.1

aliases:
  - &submodules
    - checkout
    run: |
      git submodule sync
      git submodule update --init
  - &dependencies
    - checkout
    restore_cache:
      key: dependencies-{{ .Branch }}-{{ checksum "Pipfile.lock" }}
#    - &database
#      - checkout
#      - run: *bundle_install
#      - run: *db_setup
  - &deps
      - "Dependencies"

workflows:
    version: 2
    master:
        jobs:
            - "Dependencies"
            - "Database":
                requires: *deps

jobs:
    "Dependencies":
        steps: *dependencies
#    "Database":
#        steps: *database
